---
title: "initial_exploration"
author: "Jason Hammett"
date: "November 22, 2017"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)

#Install function courtesy of CSCI 349
my.install <- function(pkg){
  if (!(pkg %in% installed.packages()[,1])){
    install.packages(pkg)
  }
  return (require(pkg, character.only=TRUE))
}

```

## Baltimore Crime
### Initial Exploration

Let's begin by loading the three data files in. Note that this data is from fall 2017. 
We have data on: calls, arrests, and victims. Calls is a very large file, and arrests has pretty messy data, so we'll do a separate rmd of EDA on those.
```{r importing data}
victims <- read.csv("Data/BPD_Part_1_Victim_Based_Crime_Data.csv")
```

Let's look at the structure of the file.

```{r structure}
str(victims)
```

Now a summary.

```{r}
summary(victims)
```

We've learned that this is a victim based crime dataset.
Firstly, here are the factors that make up the victims dataset.
* Crime Date - MM/DD/YYYY
* CrimeTime - HH:mm:ss
* CrimeCode
* Location
* Description
* Inside.Outside - can be transformed to a logical
* Weapon
* Post
* District
* Neighborhood
* Longitude
* Latitude
* Location.1 - A character verion of the latitude longitude pair
* Premise

Now time to clean the data.
First, I will uniformly make Inside.Outside either "Inside" or "Outsside"

```{r}
insideOutsideVector <- victims$Inside.Outside
#Convert single letter to full name
insideOutsideVector[which(insideOutsideVector == "O")] <- "Outside"
insideOutsideVector[which(insideOutsideVector == "I")] <- "Inside"
#Change blank's to NAs
insideOutsideVector[which(insideOutsideVector == "")] <- NA
#Remove unnecessary levels
insideOutsideVector <- factor(insideOutsideVector)
#Add it back into the data.frame
victims$Inside.Outside <- insideOutsideVector
```

Looking at the levels of the Premise attribute shows inconsistency with the data.
```{r}
levels(victims$Premise)
```

The inconsistency is beyond simply capitalization. Phrases are cut off. There are not a uniform descriptors for similar types of premise.
For instance, there is "BAR" as well as "TAVERN/NIG". I am going to presume this is "NIGHTCLUB" cut off.
There's "Church" and "RELIGOUS", so I'll need to manually edit these.

```{r}
premises <- victims$Premise
#First, change blanks to NAs
premises[which(premises == "")] <- NA
#Now, I'll capitalize every element and reform the levels
premises <- toupper(premises)
#Recalculate the levels
premises <- factor(premises)
```

* TODO - COMPLETE CLEANING OF PREMISE

Neighborhoods are a much more consistent vector.

```{r}
levels(victims$Neighborhood)
#Replace blanks with NAs
neighborhoods <- victims$Neighborhood
neighborhoods[which(neighborhoods == "")] <- NA
neighborhoods <- factor(neighborhoods)
victims$Neighborhood <- neighborhoods
#Clean up
rm(neighborhoods)
```